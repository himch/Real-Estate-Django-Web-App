{% load i18n %}
{% load static %}
{% load l10n %}
{% load listing_filters %}
{% get_current_language as LANGUAGE_CODE %}
{% csrf_token %}

<div class="rent-single__btns flex absolute top-0 right-0">
    <div class="rent-single__compar rent-single__btn flex flex-ai-center flex-j-center bg-c3" data-action="bookmark" data-id="{{ listing.id|unlocalize }}">
      <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.8598 4.31562V1.38918C2.8598 1.20827 2.78811 1.03476 2.66049 0.906829C2.53287 0.778901 2.35978 0.707031 2.1793 0.707031C1.99882 0.707031 1.82573 0.778901 1.69811 0.906829C1.57049 1.03476 1.49879 1.20827 1.49879 1.38918V4.32244C1.06237 4.46815 0.682767 4.74784 0.413763 5.12187C0.144758 5.49591 0 5.94532 0 6.40642C0 6.86752 0.144758 7.31693 0.413763 7.69097C0.682767 8.065 1.06237 8.34469 1.49879 8.4904V19.1252C1.49879 19.3061 1.57049 19.4796 1.69811 19.6075C1.82573 19.7354 1.99882 19.8073 2.1793 19.8073C2.35978 19.8073 2.53287 19.7354 2.66049 19.6075C2.78811 19.4796 2.8598 19.3061 2.8598 19.1252V8.50404C3.30375 8.36324 3.69141 8.08433 3.96655 7.70778C4.2417 7.33122 4.39003 6.87659 4.39003 6.40983C4.39003 5.94307 4.2417 5.48844 3.96655 5.11189C3.69141 4.73533 3.30375 4.45642 2.8598 4.31562Z" fill="white"/>
        <path d="M9.66449 12.6106V1.38918C9.66449 1.20827 9.5928 1.03476 9.46518 0.906829C9.33756 0.778901 9.16447 0.707031 8.98399 0.707031C8.8035 0.707031 8.63041 0.778901 8.50279 0.906829C8.37517 1.03476 8.30348 1.20827 8.30348 1.38918V12.6242C7.86706 12.77 7.48745 13.0496 7.21845 13.4237C6.94945 13.7977 6.80469 14.2471 6.80469 14.7082C6.80469 15.1693 6.94945 15.6187 7.21845 15.9928C7.48745 16.3668 7.86706 16.6465 8.30348 16.7922V19.1252C8.30348 19.3061 8.37517 19.4796 8.50279 19.6075C8.63041 19.7354 8.8035 19.8073 8.98399 19.8073C9.16447 19.8073 9.33756 19.7354 9.46518 19.6075C9.5928 19.4796 9.66449 19.3061 9.66449 19.1252V16.8058C10.1084 16.665 10.4961 16.3861 10.7712 16.0096C11.0464 15.633 11.1947 15.1784 11.1947 14.7116C11.1947 14.2449 11.0464 13.7902 10.7712 13.4137C10.4961 13.0371 10.1084 12.7582 9.66449 12.6174V12.6106Z" fill="white"/>
        <path d="M16.4702 6.67587V1.38918C16.4702 1.20827 16.3985 1.03476 16.2708 0.906829C16.1432 0.778901 15.9701 0.707031 15.7897 0.707031C15.6092 0.707031 15.4361 0.778901 15.3085 0.906829C15.1808 1.03476 15.1091 1.20827 15.1091 1.38918V6.68269C14.6727 6.8284 14.2931 7.10809 14.0241 7.48212C13.7551 7.85616 13.6104 8.30557 13.6104 8.76667C13.6104 9.22777 13.7551 9.67718 14.0241 10.0512C14.2931 10.4252 14.6727 10.7049 15.1091 10.8506V19.1252C15.1091 19.3061 15.1808 19.4796 15.3085 19.6075C15.4361 19.7354 15.6092 19.8073 15.7897 19.8073C15.9701 19.8073 16.1432 19.7354 16.2708 19.6075C16.3985 19.4796 16.4702 19.3061 16.4702 19.1252V10.8643C16.9141 10.7235 17.3018 10.4446 17.5769 10.068C17.8521 9.69147 18.0004 9.23684 18.0004 8.77008C18.0004 8.30332 17.8521 7.84869 17.5769 7.47213C17.3018 7.09558 16.9141 6.81667 16.4702 6.67587Z" fill="white"/>
      </svg>
    </div>
    <div class="rent-single__fav rent-single__btn flex flex-ai-center flex-j-center bg-c3" data-action="favorite" data-id="{{ listing.id|unlocalize }}">
      <svg width="15" height="23" viewBox="0 0 15 23" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.807292 19.9773V1.6063C0.807292 1.54319 0.83079 1.49675 0.856472 1.46934C0.881653 1.44245 0.900967 1.4401 0.909179 1.4401H13.6221C13.6334 1.4401 13.6519 1.4433 13.6754 1.46846C13.6999 1.49469 13.724 1.54102 13.724 1.6063V19.9773L7.85562 13.6939L7.26562 13.0622L6.67563 13.6939L0.807292 19.9773Z" stroke="white" stroke-width="1.61458"/>
      </svg>
    </div>
    {% comment %}
    {% if listing.bookmark_set.all|user_in:user %}bookmark=true{% endif %}
    {% if listing.favorite_set.all|user_in:user %}favorite=true{% endif %}
    {% endcomment %}
</div>



<script>
$(document).ready(function () {
        function to_bookmarks()
        {
            var current = $(this);
            var pk = current.data('id');
            var action = current.data('action');

            $.ajax({
                url: "/api/v1/offers/" + pk + "/" + action + "/",
                type: 'POST',
                data: {'obj': pk},

                success: function(json) {
                    console.log(json.result); // true если добавили, false если удалили
                }
            });

            return false;
        }

        $('[data-action="bookmark"]').click(to_bookmarks);
        $('[data-action="favorite"]').click(to_bookmarks);
    });
</script>
